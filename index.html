<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenStreetMap MCPé–‹ç™ºå®ŸéŒ²: å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿å•é¡Œã®è§£æ±º</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/black.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/monokai.min.css">
    <style>
        .reveal {
            font-size: 32px;
        }
        .reveal h1 {
            font-size: 2.2em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .reveal h2 {
            font-size: 1.6em;
            color: #42affa;
        }
        .reveal h3 {
            font-size: 1.3em;
            color: #ffa500;
        }
        .reveal pre {
            font-size: 0.45em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            max-height: 50vh;
            overflow-y: auto;
        }
        .highlight-box {
            background: rgba(66, 175, 250, 0.1);
            border-left: 5px solid #42affa;
            padding: 20px;
            margin: 20px 0;
        }
        .problem-box {
            background: rgba(255, 107, 107, 0.1);
            border-left: 5px solid #ff6b6b;
            padding: 20px;
            margin: 20px 0;
        }
        .solution-box {
            background: rgba(81, 207, 102, 0.1);
            border-left: 5px solid #51cf66;
            padding: 20px;
            margin: 20px 0;
        }
        .metric {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
        }
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }
        .tool-list {
            text-align: left;
            font-size: 0.8em;
        }
        .tool-list ul {
            list-style: none;
            padding: 0;
        }
        .tool-list li {
            margin: 8px 0;
            padding-left: 20px;
        }
        .tool-list li::before {
            content: "âœ“ ";
            color: #51cf66;
            font-weight: bold;
            margin-right: 10px;
        }

    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            
            <!-- ã‚¿ã‚¤ãƒˆãƒ«ã‚¹ãƒ©ã‚¤ãƒ‰ -->
            <section>
                <h1>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§MCPã‚µãƒ¼ãƒãƒ¼ã‚’é–‹ç™ºã—ãŸéš›ã®ãƒˆãƒ©ãƒ–ãƒ«ã¨è§£æ±ºç­–</h1>
                <p style="margin-top: 40px; font-size: 0.8em; color: #42affa;">
                    OpenStreetMap MCPé–‹ç™ºã§ã®å®Ÿä½“é¨“
                </p>
                <p style="font-size: 0.6em; color: #888;">2025å¹´11æœˆ</p>
            </section>

            <!-- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºèƒŒæ™¯ -->
            <section>
                <h2>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆClaude Codeï¼‰ã§MCPé–‹ç™º</h2>
                <div class="highlight-box">
                    <h3 style="margin-top: 0;">ğŸ¤– é–‹ç™ºèƒŒæ™¯</h3>
                    <div class="tool-list">
                        <ul>
                            <li><strong>Claude Code</strong>ã‚’ä½¿ã£ã¦OpenStreetMap MCP ã‚µãƒ¼ãƒãƒ¼ã‚’é–‹ç™º</li>
                            <li><strong>12ç¨®é¡ã®ãƒ„ãƒ¼ãƒ«</strong>ã§åœ°ç†ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆå»ºç‰©ã€é“è·¯ã€æ–½è¨­ãªã©ï¼‰</li>
                            <li><strong>Overpass API</strong>ã‹ã‚‰OSMãƒ‡ãƒ¼ã‚¿ã‚’GeoJSONå½¢å¼ã§æä¾›</li>
                            <li><strong>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸»å°</strong>ã§æ®µéšçš„ã«æ©Ÿèƒ½ã‚’å®Ÿè£…</li>
                        </ul>
                    </div>
                </div>
                <div class="problem-box">
                    <p style="margin: 0; text-align: center;">
                        <strong>ã—ã‹ã—ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½œã£ãŸå½“åˆã®ä»•æ§˜ã«é‡å¤§ãªå•é¡ŒãŒ...</strong>
                    </p>
                </div>
            </section>

            <!-- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å½“åˆä»•æ§˜ -->
            <section>
                <h2>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½œã£ãŸå½“åˆã®ä»•æ§˜</h2>
                
                <div class="problem-box">
                    <h3 style="margin-top: 0; color: #ff6b6b;">âŒ å½“åˆã®ä»•æ§˜: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç›´æ¥LLMã«è¿”å´</h3>
                    <pre><code class="language-javascript" data-trim>
// AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå®Ÿè£…ã—ãŸå½“åˆã®ã‚³ãƒ¼ãƒ‰
export async function getBuildings(client, args) {
  const osmData = await client.query(query);
  const geojson = osmToGeoJSON(osmData);
  
  return {
    content: [{
      type: 'text',
      text: JSON.stringify(geojson, null, 2)  // ğŸš¨ å·¨å¤§ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥è¿”ã™
    }]
  };
}
                    </code></pre>
                </div>

                <div class="highlight-box">
                    <p style="margin: 0; text-align: center; font-size: 0.9em;">
                        <strong>AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æƒ³å®š:</strong> ã€ŒMCPãƒ„ãƒ¼ãƒ«ã¯APIãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¿”ã™ã‚‚ã®ã€<br>
                        â†’ <strong>å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã®å ´åˆã®ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’è€ƒæ…®ã—ã¦ã„ãªã‹ã£ãŸ</strong>
                    </p>
                </div>

            </section>

            <!-- å¤§å®¹é‡APIã®è€ƒæ…®äº‹é … -->
            <section>
                <h2>å¤§å®¹é‡APIã‚’æ‰±ã†éš›ã®é‡è¦ãªè€ƒæ…®äº‹é …</h2>
                
                <div class="problem-box">
                    <h3 style="margin-top: 0;">âš ï¸ å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿APIã®ç‰¹å¾´</h3>
                    <div class="tool-list">
                        <ul>
                            <li><strong>åœ°ç†ãƒ‡ãƒ¼ã‚¿API</strong>: OpenStreetMapã€Google Mapsç­‰</li>
                            <li><strong>ç”»åƒãƒ»å‹•ç”»API</strong>: ãƒ¡ãƒ‡ã‚£ã‚¢é…ä¿¡ã‚µãƒ¼ãƒ“ã‚¹</li>
                            <li><strong>å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆAPI</strong>: çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã€ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ç­‰</li>
                            <li><strong>æ¤œç´¢çµæœAPI</strong>: å¤§é‡ã®çµæœã‚’è¿”ã™API</li>
                        </ul>
                    </div>
                </div>

                <div class="highlight-box">
                    <h3 style="margin-top: 0;">ğŸ’¡ äº‹å‰ã«ç¢ºèªã™ã¹ããƒã‚¤ãƒ³ãƒˆ</h3>
                    <div class="grid-2">
                        <div class="tool-list">
                            <ul>
                                <li>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚µã‚¤ã‚ºã®æƒ³å®š</li>
                                <li>1MBã‚’è¶…ãˆã‚‹å¯èƒ½æ€§</li>
                                <li>ãƒˆãƒ¼ã‚¯ãƒ³æ›ç®—ã§ã®è¨ˆç®—</li>
                            </ul>
                        </div>
                        <div class="tool-list">
                            <ul>
                                <li>ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½</li>
                                <li>ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½</li>
                                <li>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ‰‹æ³•ã®è§£æ±ºç­– -->
            <section>
                <h2>ã€€Toolã®ä»•æ§˜ã‚’å¤‰æ›´</h2>
                
                <div class="solution-box">
                    <h3 style="margin-top: 0; color: #51cf66;">âœ… æ–°ã—ã„ä»•æ§˜: ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¿”å´</h3>
                    <pre><code class="language-javascript" data-trim>
export async function getBuildings(client, args) {
  const { output_path } = args;
  
  if (output_path) {
    // ğŸ¯ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ‰‹æ³•: å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
    const result = await executeGeoJSONQuery(client, query, output_path);
    
    return {
      content: [{
        type: 'text',
        text: JSON.stringify({
          status: 'success',
          message: 'å»ºç‰©ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã—ãŸ',
          file: output_path,              // âœ… ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ã¿
          size: result.size,              // âœ… ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
          feature_count: result.feature_count  // âœ… ã‚µãƒãƒªãƒ¼æƒ…å ±
        }, null, 2)
      }]
    };
  }
  // å°ã•ãªãƒ‡ãƒ¼ã‚¿ã¯å¾“æ¥é€šã‚Šç›´æ¥è¿”å´
}
                    </code></pre>
                </div>
                
                <div class="highlight-box">
                    <h3 style="margin-top: 0;">ğŸ’¡ APIãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®å‡¦ç†</h3>
                    <p style="margin: 0; text-align: center; font-size: 0.9em;">
                        <strong>å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ â†’ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜</strong><br>
                        <strong>LLMã«ã¯ â†’ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ã¿è¿”å´</strong><br>
                    </p>
                </div>
                
            </section>

            <!-- executeGeoJSONQuery ã®èª¬æ˜ -->
            <section>
                <h2>ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å‰ã®å¤‰æ›å‡¦ç†</h2>
                
                <div class="highlight-box">
                    <h3 style="margin-top: 0;">ğŸ”„ OSMãƒ‡ãƒ¼ã‚¿ â†’ GeoJSONãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›ãƒ•ãƒ­ãƒ¼</h3>
                    <pre><code class="language-javascript" data-trim>
export async function executeGeoJSONQuery(overpassClient, query, outputPath) {
  // 1. OSMãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  const tempPath = outputPath + '.tmp.osm.json';
  await downloadToFile(server.url, fullQuery, tempPath);
  
  // 2. OSMãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
  const osmData = JSON.parse(await fs.readFile(tempPath));
  
  // 3. GeoJSONã«å¤‰æ›
  const geojson = osmtogeojson(osmData);
  
  // 4. æœ€çµ‚ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
  await fs.writeFile(outputPath, JSON.stringify(geojson, null, 2));
  
  // 5. ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
  await fs.unlink(tempPath);
  
  return {
    size: `${(Buffer.byteLength(JSON.stringify(geojson))/1024/1024).toFixed(2)} MB`,
    feature_count: geojson.features.length
  };
}
                    </code></pre>
                </div>

                <div class="solution-box">
                    <h3 style="margin-top: 0;">ğŸ’¡ ãªãœ2æ®µéšå‡¦ç†ï¼Ÿ</h3>
                        <div class="tool-list">
                            <ul>
                                <li>OSMã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ â†’ æ¨™æº–GeoJSONå½¢å¼</li>
                                <li>åœ°ç†æƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ã§åˆ©ç”¨å¯èƒ½ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«</li>
                            </ul>
                        </div>
                </div>
            </section>

            <!-- ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ‰‹æ³•ã®å®Ÿè£…è©³ç´° -->
            <section>
                <h2>ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å‡¦ç†</h2>
                
                <div class="highlight-box">
                    <h3 style="margin-top: 0;">utils/file-downloader.js</h3>
                    <pre><code class="language-javascript" data-trim>
export async function downloadToFile(url, query, outputPath) {
  return new Promise((resolve, reject) => {
    const req = https.request(options, (res) => {
      const writeStream = createWriteStream(outputPath);
      let downloadedBytes = 0;

      res.on('data', (chunk) => {
        downloadedBytes += chunk.length;
        // å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®é€²è¡ŒçŠ¶æ³è¡¨ç¤º
        if (downloadedBytes % (1024 * 1024) === 0) {
          console.error(`Downloaded: ${(downloadedBytes/1024/1024).toFixed(1)} MB`);
        }
      });

      // ğŸ”¥ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ›¸ãè¾¼ã¿ã§ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–
      res.pipe(writeStream);
      
      writeStream.on('finish', () => {
        resolve({ 
          size: `${(downloadedBytes/1024/1024).toFixed(2)} MB`,
          bytes: downloadedBytes 
        });
      });
    });
    
    req.write(query);
    req.end();
  });
}
                    </code></pre>
                </div>

                <div class="solution-box">
                    <h3 style="margin-top: 0;">ğŸ¯ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ‰‹æ³•ã®åˆ©ç‚¹</h3>
                        <div class="tool-list">
                            <ul>
                                <li><strong>ãƒ¡ãƒ¢ãƒªåŠ¹ç‡</strong>: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†</li>
                                <li><strong>é«˜é€Ÿ</strong>: ç›´æ¥ãƒ‡ã‚£ã‚¹ã‚¯æ›¸ãè¾¼ã¿</li>
                            </ul>
                        </div>
                </div>
            </section>


            <!-- ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ‰‹æ³•ã®é©ç”¨çµæœ -->
            <section>
                <h2>æœ€çµ‚çš„ãªMCPã®ä»•æ§˜</h2>
                
                <div class="solution-box">
                    <h3 style="margin-top: 0;">ğŸ¯ãƒ„ãƒ¼ãƒ«ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</h3>
                    <div class="grid-2">
                        <div class="tool-list">
                            <h4>ğŸ“ ãƒ„ãƒ¼ãƒ«</h4>
                            <ul>
                                <li>test_connectionï¼ˆæ¥ç¶šãƒ†ã‚¹ãƒˆï¼‰</li>
                                <li>get_buildingsï¼ˆå»ºç‰©ï¼‰</li>
                                <li>get_roadsï¼ˆé“è·¯ï¼‰</li>
                                <li>get_amenitiesï¼ˆæ–½è¨­ï¼‰</li>
                                <li>get_waterwaysï¼ˆæ°´åŸŸï¼‰</li>
                                <li>get_green_spacesï¼ˆç·‘åœ°ï¼‰</li>
                                <li>get_railwaysï¼ˆé‰„é“ï¼‰</li>
                            </ul>
                        </div>
                        <div class="tool-list">
                            <h4>ğŸ› ï¸ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</h4>
                            <ul>
                                <li>file-downloader(ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰)</li>
                                <li>converterï¼ˆå¤‰æ›ï¼‰</li>
                                <li>overpass(APIç®¡ç†)</li>
                                <li>cacheï¼ˆã‚­ãƒ£ã‚·ãƒ³ã‚°ï¼‰</li>
                                <li>logger(ãƒ­ã‚°ä¿å­˜)</li>
                                <li>validator(å…¥åŠ›æ¤œè¨¼)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                

            </section>

            <!-- ã€€MCPã‚µãƒ¼ãƒãƒ¼é–‹ç™ºã§å­¦ã‚“ã æ•™è¨“ -->
            <section>
                <h2>MCPã‚µãƒ¼ãƒãƒ¼é–‹ç™ºã§å­¦ã‚“ã æ•™è¨“</h2>
                
                    <div>
                        <div class="highlight-box">
                            <h3 style="margin-top: 0;">ğŸ¤– AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç›²ç‚¹</h3>
                            <p style="font-size: 0.8em;">AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã¯ã§ãã‚‹ãŒã€<strong>å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã®ãƒˆãƒ¼ã‚¯ãƒ³å½±éŸ¿</strong>ã¯äººé–“ãŒæŒ‡æ‘˜ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸ</p>
                        </div>
                    </div>

                <div class="problem-box">
                    <h3 style="margin-top: 0; text-align: center;">ğŸ’¡ æœ€é‡è¦ãªå­¦ã³</h3>
                    <p style="margin: 0; text-align: center; font-size: 0.9em;">
                        <strong>ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™APIã‚’æ‰±ã†å ´åˆã¯ã€æœ€åˆã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ‰‹æ³•ã‚’æ¤œè¨ã™ã‚‹</strong><br>
                        å¾Œã‹ã‚‰ä¿®æ­£ã™ã‚‹ã‚ˆã‚Šã‚‚ã€è¨­è¨ˆæ®µéšã§çµ„ã¿è¾¼ã‚€æ–¹ãŒåŠ¹ç‡çš„
                    </p>
                </div>
            </section>



            <!-- çµè«– -->
            <section>
                <h2 style="color: #51cf66;">çµè«–</h2>
                
                <div class="problem-box">
                    <h3 style="margin-top: 0; text-align: center;">ğŸ¤– AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºè€…ã¸ã®é‡è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
                    <p style="margin: 0; text-align: left; font-size: 0.95em;">
                        <strong>MCPã‚µãƒ¼ãƒãƒ¼ã¯æ¯”è¼ƒçš„ã‚·ãƒ³ãƒ—ãƒ«ãªä»•çµ„ã¿ãªã®ã§AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã‚µã‚¯ãƒƒã¨ã¤ãã£ã¦ãã‚Œã‚‹ã‘ã©ã€AIã¯å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã®ãƒˆãƒ¼ã‚¯ãƒ³ã¸ã®å½±éŸ¿ã¯è€ƒæ…®ã—ã¦ãã‚Œãªã„ã®ã§ã€æ°—ã¥ã‹ãªã„ã¨ä¸åŠ¹ç‡ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚‹ã®ã§æ°—ã‚’ã¤ã‘ã¾ã—ã‚‡ã†ã€‚<br>
                            <br/>ã¦ã‹ã€å¾“é‡èª²é‡‘ã ã£ãŸã‚‰çµ‚ã‚ã£ã¦ãŸã€‚</strong><br>
                    </p>
                </div>
                
                
            </section>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/highlight.min.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            backgroundTransition: 'fade',
            controls: true,
            progress: true,
            center: true,
            slideNumber: 'c/t',
            plugins: [ RevealHighlight ],
            highlight: {
                highlightOnLoad: true
            }
        });
    </script>
</body>
</html>